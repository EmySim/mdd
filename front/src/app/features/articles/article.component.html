<!-- article.component.html - LISTE AVEC FILTRES -->
<div class="page-with-navbar">
  
  <!-- En-t√™te avec filtres -->
  <div class="page-with-navbar__header">
    <div class="container">
      
      <!-- Titre et action -->
      <div class="flex-between mb-lg">
        <div>
          <h1 class="page-title">Articles</h1>
          <p class="text-secondary">
            D√©couvrez les derniers articles de la communaut√©
          </p>
        </div>
        
        <div class="header-actions">
          <button 
            class="btn btn--primary"
            (click)="createArticle()"
          >
            ‚úçÔ∏è Cr√©er un article
          </button>
        </div>
      </div>
      
      <!-- Filtres -->
      <div class="filters-section">
        <div class="flex-between flex-gap-md">
          
                    <!-- Filtre par th√®me -->
          <div class="filter-group">
            <label class="filter-label">Th√®me :</label>
            <select 
              class="filter-select"
              [value]="selectedThemeId"
              (change)="filterByTheme($event)"
              [disabled]="isLoadingThemes"
            >
              <option value="">Tous les th√®mes</option>
              <option 
                *ngFor="let theme of themes" 
                [value]="theme.id"
              >
                {{ theme.name }}
              </option>
            </select>
          </div>
          
          <!-- Tri -->
          <div class="filter-group">
            <label class="filter-label">Tri :</label>
            <button 
              class="btn btn--secondary btn--sm"
              (click)="changeSortDirection()"
              [disabled]="isLoading"
            >
              {{ getSortText() }}
              <span class="sort-icon">
                {{ sortDirection === 'desc' ? '‚Üì' : '‚Üë' }}
              </span>
            </button>
          </div>
          
          <!-- Reset -->
          <div class="filter-group">
            <button 
              class="btn btn--secondary btn--sm"
              (click)="resetFilters()"
              [disabled]="isLoading"
            >
              üîÑ Reset
            </button>
          </div>
          
        </div>
        
        <!-- Compteur r√©sultats -->
        <div class="results-info mt-md" *ngIf="!isLoading">
          <span class="text-secondary">
            {{ articles.length }} article{{ articles.length > 1 ? 's' : '' }}
            <span *ngIf="selectedThemeId">dans "{{ getSelectedThemeName() }}"</span>
          </span>
        </div>
      </div>
      
    </div>
  </div>

  <!-- Contenu principal -->
  <div class="page-with-navbar__content">
    <div class="container">
      
      <!-- Loading initial -->
      <div class="text-center p-xl" *ngIf="isLoading">
        <div class="loading-spinner"></div>
        <p class="text-secondary">Chargement des articles...</p>
      </div>

      <!-- Liste des articles -->
      <div *ngIf="!isLoading">
        
        <!-- Articles -->
        <div class="grid grid--articles" *ngIf="articles.length > 0">
          <article
            class="card card--article card--clickable"
            *ngFor="let article of articles; trackBy: trackByArticleId"
            (click)="viewArticle(article)"
          >
            <!-- M√©tadonn√©es -->
            <div class="article-meta mb-sm">
              <span class="article-author">{{ article.authorUsername }}</span>
              <span class="article-date">{{ article.createdAt | date:'short' }}</span>
              <span
                class="article-theme"
                (click)="viewTheme(article.themeId, article.themeName); $event.stopPropagation()"
              >
                {{ article.themeName }}
              </span>
            </div>

            <!-- Titre -->
            <h2 class="article-title mb-sm">{{ article.title }}</h2>

            <!-- Contenu tronqu√© -->
            <p class="article-content mb-md">
              {{ truncateContent(article.content) }}
            </p>

            <!-- Actions -->
            <div class="article-actions">
              <button
                class="btn btn--sm btn--secondary"
                (click)="viewArticle(article); $event.stopPropagation()"
              >
                Lire l'article
              </button>
            </div>
          </article>
        </div>

        <!-- √âtat vide -->
        <div class="empty-state" *ngIf="articles.length === 0">
          <div class="empty-icon">üì∞</div>
          <h2 class="empty-title">Aucun article trouv√©</h2>
          <p class="empty-message" *ngIf="selectedThemeId">
            Aucun article dans "{{ getSelectedThemeName() }}" pour le moment.
          </p>
          <p class="empty-message" *ngIf="!selectedThemeId">
            Aucun article disponible pour le moment.
          </p>
          <div class="empty-actions mt-lg">
            <button 
              class="btn btn--primary"
              (click)="createArticle()"
            >
              Cr√©er le premier article
            </button>
            <button 
              class="btn btn--secondary ml-md"
              (click)="resetFilters()"
              *ngIf="selectedThemeId"
            >
              Voir tous les articles
            </button>
          </div>
        </div>

      </div>

      <!-- Pagination -->
      <div class="pagination-section" *ngIf="articles.length > 0">
        
        <!-- Charger plus -->
        <div class="text-center" *ngIf="hasMoreArticles">
          <button
            class="btn btn--secondary btn--lg"
            (click)="loadMoreArticles()"
            [disabled]="isLoadingMore"
          >
            <span *ngIf="!isLoadingMore">Charger plus d'articles</span>
            <span *ngIf="isLoadingMore">
              <div class="loading-spinner loading-spinner--inline"></div>
              Chargement...
            </span>
          </button>
        </div>

        <!-- Fin de liste -->
        <div class="text-center" *ngIf="!hasMoreArticles">
          <p class="text-secondary">
            üéâ Vous avez vu tous les articles !
          </p>
          <button
            class="btn btn--secondary btn--sm mt-sm"
            (click)="refreshArticles()"
          >
            üîÑ Actualiser
          </button>
        </div>

      </div>

    </div>
  </div>
  
</div>