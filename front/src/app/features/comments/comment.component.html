<div class="comments-block">
  <h3 class="title">Commentaires</h3>

  <!-- Boucle des commentaires -->
  <ng-container *ngFor="let comment of comments; trackBy: trackByCommentId">
    <div class="previous-comment">
      <p>{{ comment.authorUsername }}</p>

      <!-- Contenu du commentaire dans la card -->
      <div class="comment-card">
        <p class="comment-content">{{ comment.content }}</p>
      </div>
    </div>
  </ng-container>

  <!-- Formulaire pour poster un commentaire -->
  <!-- ...existing code... -->
  <div class="comments-section">
    <form [formGroup]="commentForm" (ngSubmit)="onSubmitComment()">
      <div class="comment-form">
        <textarea
          class="form__field"
          [class.form__field--error]="hasFieldError('content')"
          formControlName="content"
          placeholder="Ã‰crivez ici votre commentaire"
          rows="3"
        ></textarea>
        <span class="form__error" *ngIf="hasFieldError('content')">
          {{ getFieldError("content") }}
        </span>
      </div>
      <div class="actions">
        <button
          class="btn-send-comment"
          type="submit"
          [disabled]="!commentForm.valid || isSubmitting"
        >
          <img src="/assets/send_.arrow.svg" alt="Envoyer" class="send-arrow" />
        </button>
      </div>
    </form>

    <!-- Message de chargement -->
    <div class="text-center p-xl" *ngIf="isLoading && comments.length === 0">
      <div class="loading-spinner"></div>
      <p class="text-secondary">Chargement des commentaires...</p>
    </div>
  </div>
</div>
