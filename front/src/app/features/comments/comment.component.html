<div class="comments-block">
  <h3 class="title">Commentaires</h3>

  <ng-container *ngFor="let comment of comments; trackBy: trackByCommentId">
    <div class="previous-comment">
      <p>{{ comment.authorUsername }}</p>

      <div class="comment-card">
        <p class="comment-content">{{ comment.content }}</p>
      </div>
    </div>
  </ng-container>

  <div class="comments-section">
    <form [formGroup]="commentForm" (ngSubmit)="onSubmitComment()">
      <div class="comment-form-wrapper">
        <textarea
          class="form__field"
          [class.form__field--error]="hasFieldError('content')"
          formControlName="content"
          placeholder="Ã‰crivez ici votre commentaire"
          rows="3"
        ></textarea>
        <button
          class="btn-send-comment"
          type="submit"
          [disabled]="!commentForm.valid || isSubmitting"
        >
          <img src="/assets/send_.arrow.svg" alt="Envoyer" class="send-arrow" />
        </button>
      </div>
      <span class="form__error" *ngIf="hasFieldError('content')">
        {{ getFieldError("content") }}
      </span>
    </form>
  </div>

  <div class="text-center p-xl" *ngIf="isLoading && comments.length === 0">
    <div class="loading-spinner"></div>
    <p class="text-secondary">Chargement des commentaires...</p>
  </div>
</div>